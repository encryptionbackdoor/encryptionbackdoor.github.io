<html>
	<!-- Achex WebSocketServer Banner -->
	<a href="http://www.achex.ca/" 
		style="background:#555;
		color:#ddd;border-radius:3px;padding:0px 10px 0px 10px;
		text-decoration:none;
		font-family:Arial;letter-spacing:1px;font-size:12px;">
		Powered by Achex WebSocketServer
		
		<font color="black"><p><b>This secure encryption backdoor has been provided as a service to the tech community: Please pipe your cleartext JSON formatted user data to the Achex Websocket.</b></p> <p><b>Rest secure in the knowledge that advanced ROT13 encryption will secure the contents from bad actors.</b></p></font>
		<font color="red"><p><b>WARNING: FOR LAW ENFORCEMENT USE ONLY! IF YOU ARE NOT ONE OF THE GOOD GUYS: PLEASE AVERT YOUR EYES!</b></p></font>
	</a><br><br>
	<!-- Achex WebSocketServer Banner -->

	Achex WebSocketServer <br>- javascript interface example -<br>
	<hr>

	<!-- User Input -->
	<input id="userinput" type="text" value="ping">
	<a href="javascript:send()">SEND</a>

	<!-- Log display -->
	<div id="mylog">Received:<br></div>

	<!-- WEBSOCKET SIMPLE SCRIPT -->
	<script type="text/javascript">

	// --- LOG ---
	//***************************
	// get log object from html 
	var logdiv = document.getElementById('mylog');

	// make a simplified log function
	function logf(str){
		logdiv.innerHTML += str + '<br>';
	}
	//***************************

	// --- WEBSOCKET ---
	//***************************
	// make new conncetion
	var ws = new WebSocket('ws://achex.ca:4010');

	// add event handler for incomming message
	ws.onmessage = function(evt){
		var my_received_message = evt.data;
		logf('received: ' + rot13(my_received_message));
	};

	// add event handler for diconnection 
	ws.onclose= function(evt){
		logf('log: Diconnected');
	};

	// add event handler for error 
	ws.onerror= function(evt){
		logf('log: Error');
	};

	// add event handler for new connection 
	ws.onopen= function(evt){
		logf('log: Connected');
	};

	// make a simple send function
	function send(){
		var input = document.getElementById('userinput');
		// send content of input field into websocket
		ws.send(input.value);
		// erase input field
		input.value = '';
	}
	
	function rot13(str) { //source: https://rot47.net/rot13.html
  	  var s = [];
	  for (i = 0; i < str.length; i ++)
  		{
	    	idx = str.charCodeAt(i);
    		if ((idx >= 48) && (idx <= 57))
      		{
      			if (idx <= 52)
	      	{
        		s[i] = String.fromCharCode(((idx + 13)));
	      	}
	      	else
	      	{
        		s[i] = String.fromCharCode(((idx - 13)));
      		}
	    	} 
	    	else
	    	{
	      	s[i] = String.fromCharCode(idx);
	    	}
	  	}
	  return s.join('');
	}
	//***************************
	
	</script>
	<font color="black"><p><b>Note: In anticipation of retaliatory legal-hasseling by butt-hurt fascists, I've generated the following bitcoin address to start collecting a legal defense fund. Please consider donating and showing your support for the right to mock the powerful!</b></p></font>
		<font color="black"><p><strong>Bitcoin</strong> is a secure and anonymous digital currency. Bitcoins cannot be easily tracked back to you, and are safer and faster alternative to other donation methods. You can send BTC to the following address:</p></font>
                        <code id="btcA">1McNsCTN26zkBSHs9fsgUHHy8u5S1PY5q3</code>
                        <a id="btcS" href="bitcoin:1HB5XMLmzFVj8ALj6mfBsbifRoD4miY36v" class="glyphicon glyphicon-share"></a>
                        <a id="btcB" href="#" class="glyphicon glyphicon-refresh"></a>
                        <p>Various sites offer a service to exchange other currency to/from Bitcoins. There are also services allowing trades of goods for Bitcoins. Bitcoins are not subject to central regulations and are still gaining value. To learn more about Bitcoins, visit the website (<a href="https://bitcoin.org">https://bitcoin.org</a>) or read more on <a href="https://en.wikipedia.org/wiki/Bitcoin">Wikipedia</a>.</p>
                        <p>For a more private transaction, you can click on the refresh button above to generate a new address</p>
</html>
